<div class="row top-nav">
  <h3>Settings</h3>
</div>

<div class="row">
  <div class="col s12 m12 l12">
    <h4>Personal Information</h4>

    <form [formGroup]="editDetailsForm">
      Name of Donor
      <span class="inlineEditControls">
        <input formControlName="nameField" [value]="this.currentUser?.name" [readOnly]="!this.nameCheck">
        <button type="button" class="btn-flat waves-effect"
          (click)="this.toggleChangeName(this.editDetailsForm.controls.nameField.getRawValue())">
          <i *ngIf="!this.nameCheck" class="material-symbols-outlined">edit</i>
          <div *ngIf="this.nameCheck" class="editBtnContainer">
            <i class="material-symbols-outlined check">check</i>
            <div>Save Changes</div>
          </div>
        </button>
      </span>

      Phone Number
      <span class="inlineEditControls">
        <input id="phoneNum" formControlName="phoneNumField" prefix="(+27)" mask=' 00 000 0000'
          [readOnly]="!this.phoneNumCheck">
        <button type="button" class="btn-flat waves-effect"
          (click)="this.toggleChangePhoneNum(this.editDetailsForm.controls.phoneNumField.getRawValue())">
          <i *ngIf="!this.phoneNumCheck" class="material-symbols-outlined">edit</i>
          <div *ngIf="this.phoneNumCheck" class="editBtnContainer">
            <i class="material-symbols-outlined check">check</i>
            <div>Save Changes</div>
          </div>
        </button>
      </span>
      <small *ngIf="phoneNumFieldErrors && editDetailsForm.controls['phoneNumField'].errors">Please enter a valid phone
        number.</small>

      <h4>Donor Location</h4>
      Address
      <span class="inlineEditControls">
        <input id="placesField" formControlName="locationField" [readOnly]="!this.locationCheck">
        <button type="button" class="btn-flat waves-effect"
          (click)="this.toggleChangeAddress(this.placeAutocompleteUtil.currentSelectedAddress!)">
          <i *ngIf="!this.locationCheck" class="material-symbols-outlined">edit</i>
          <div *ngIf="this.locationCheck" class="editBtnContainer">
            <i class="material-symbols-outlined check">check</i>
            <div>Save Changes</div>
          </div>
        </button>
      </span>
      <small *ngIf="locationFieldErrors">Please select a valid location.</small>
      <google-map width="100%" height="300px" [options]="mapOptions">
        <map-marker *ngFor="let marker of this.markers" [position]="marker.position" [label]="marker.label!"
          [title]="marker.title!" [options]="marker.options!"></map-marker>
      </google-map>
    </form>
  </div>

  <div id="infowindow-content">
    <span id="placeName" class="title"></span><br />
    <span id="placeAddress"></span>
  </div>
</div>

<!-- Modal popups -->
<!-- Modal save changes for phone number -->
<div id="savePhoneNumberModal" class="modal">
  <div class="modal-content">
    <h4>Save New Phone Number</h4>
    <p id="newPhoneNumber"></p>
  </div>
  <div class="modal-footer">
    <a (click)="this.cancelEdit()" class="modal-action modal-close waves-effect waves-red btn-flat ">Cancel</a>
    <a (click)="this.changePhoneNum(this.newPhoneNum!)"
      class="modal-action modal-close waves-effect waves-green btn-flat ">Yes</a>
  </div>
</div>
