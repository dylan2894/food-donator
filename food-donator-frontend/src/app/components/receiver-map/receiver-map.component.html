<div class="google-map">
  <google-map width="100%" height="100vh" [options]="mapOptions"
  >
    <map-marker
      *ngFor="let marker of markers"
      [position]="marker.position"
      [label]="marker.label!"
      [title]="marker.title!"
      [options]="marker.options!"
      (mapClick)="this.openModal(marker.id!, marker.title!, marker.phoneNum!)"
    ></map-marker>
  </google-map>
</div>

<!-- Donor Select -->
<div id="donorSelect" class="input-field col s12">
  <select id="donorInnerSelect" (change)="onChange($event)">
    <option value="" disabled selected>Choose your option</option>
    <option *ngFor="let donor of donors" [value]="donor.id">
      {{ donor.name }}
    </option>
  </select>
  <label id="donorSelectLabel">Select Donor</label>
</div>

<!-- Saved Pins Switch -->
<div class="switch pins-switch">
  <span class="material-symbols-outlined center booksmarksIcon">bookmarks</span>
  <span class="center">View Saved Pins</span>
  <label class="center">
    <input type="checkbox">
    <span class="lever"></span>
  </label>
</div>

<div id="hiddenMenu" (click)="this.openMenu()"></div>

<!-- Popout Sidenav -->
<ul id="slide-out-donee" class="sidenav">
  <li>
    <div class="user-view">
      <h3>Settings</h3>
    </div>
  </li>
  <li>
    <div class="user-view">
      <h5>Push notifications</h5>
      <div class="switch">
        <label>
          Off
          <input type="checkbox">
          <span class="lever"></span>
          On
        </label>
      </div>
    </div>
  </li>
  <li>
    <div class="user-view">
      <h5>Personal Information</h5>
      <form [formGroup]="editDetailsForm">
        Phone Number
        <div>
          <input id="phoneNumField" formControlName="phoneNumField" type="text" prefix="(+27)" mask=' 00 000 0000' [value]="this.phoneNumUtil.format(this.currentUser?.phone_num!)" [readOnly]="!this.phoneNumCheck">
          <button id="editPhoneNumBtn" class="btn-flat waves-effect" (click)="this.toggleChangePhoneNum(this.editDetailsForm.controls.phoneNumField.value)">
            <i *ngIf="!this.phoneNumCheck" class="material-symbols-outlined">edit</i>
            <span *ngIf="this.phoneNumCheck">
              Save Changes
              <i class="material-symbols-outlined check">check</i>
            </span>
          </button>
        </div>
      </form>
    </div>
  </li>
  <li id="logout">
    <i (click)="this.logout()" class="material-symbols-outlined medium">logout</i>
  </li>
</ul>

<!-- Modal Structure -->
<div id="modal1" class="modal bottom-sheet">
  <div class="modal-content">

    <span>
      <h4 id="modalHeading">{{ this.currentDonorName }}</h4>
      <span id="savedPinsContainer">
        <i class="material-symbols-outlined center">bookmarks</i>
        Save Pin
      </span>
    </span>

    <div id="flexContainer">
      <!-- Donation Schedule -->

      <div class="carousel carousel-slider">
        <app-card *ngFor="let donation of this.currentDonorDonations"
        [date]="this.dateUtil.numericToTextDate(this.dateUtil.epochDateToReadable(donation.donationdate))"
        [startTime]="donation.starttime"
        [endTime]="donation.endtime"
        description="add donation.description"
        [isCurrent]="this.donationService.isCurrentDonationByDonation(donation)" ></app-card>
          <!-- <div class="card carousel-item">
            <div class="card-image">
              <img style="height: 100px;" src="../../../assets/images/cans.jpg">
              <span class="card-title">Card Title</span>
            </div>
            <div class="card-content">
              <p>I am a very simple card. I am good at containing small bits of information.
              I am convenient because I require little markup to use effectively.
            xxxxxxx xxxxxxx xxxxxxxxx xxxxxx xxxxxxx xxxxxx xxxxxxxxxx xxx xxxxxx xxxxxxxx
          xxxxxxx xxxxx xxxxxx xxxxxxx xxxxxx xxxxxx xxxxxxxxx xxxxx xxxxxxxxx xxxxxxx xxxxxx</p>
            </div>
            <div class="card-action">
              <a href="#">This is a link</a>
            </div>
          </div> -->

          <!-- <div class="card horizontal carousel-item">
            <div class="card-image">
              <img style="height: 100%;" src="../../../assets/images/cans.jpg">
            </div>
            <div class="card-stacked">
              <div class="card-content">
                <p>I am a very simple card. I am good at containing small bits of information.</p>
              </div>
              <div class="card-action">
                <a href="#">This is a link</a>
              </div>
            </div>
          </div> -->

        <a class="carousel-item"><img src="https://www.pulsecarshalton.co.uk/wp-content/uploads/2016/08/jk-placeholder-image.jpg"></a>
        <a class="carousel-item"><img src="https://www.pulsecarshalton.co.uk/wp-content/uploads/2016/08/jk-placeholder-image.jpg"></a>
        <a class="carousel-item"><img src="https://www.pulsecarshalton.co.uk/wp-content/uploads/2016/08/jk-placeholder-image.jpg"></a>
        <a class="carousel-item"><img src="https://www.pulsecarshalton.co.uk/wp-content/uploads/2016/08/jk-placeholder-image.jpg"></a>
      </div>
      <!-- <div id="scheduleContainer">
        <table >
          <thead>
            <tr style="border: none;">
              <th scope="colgroup">Donation Schedule</th>
            </tr>
            <tr>
                <th scope="col">Date</th>
                <th scope="col">Time</th>
            </tr>
          </thead>

          <tbody>
            <tr *ngIf="this.currentDonorDonations === null || this.currentDonorDonations?.length === 0">
              <td colspan="2" style="text-align: center;">No upcoming donations</td>
            </tr>
            <tr *ngFor="let donation of this.currentDonorDonations">
              <td>{{ this.dateUtil.numericToTextDate(this.dateUtil.epochDateToReadable(donation.donationdate)) }}</td>
              <td>{{ donation.starttime }} - {{ donation.endtime }}</td>
            </tr>
          </tbody>
        </table>
      </div> -->

      <!-- WhatsApp and Maps Directions -->
      <div id="actionButtonsContainer">
        <p>Need directions?</p>

        <a href="https://www.google.com/maps/dir/?api=1&origin=41.43206,-81.38992&destination=41.43206,-81.48992&travelmode=walking" target="_blank"><button class="btn">Google Maps</button></a>
        <p>Arrived? Notify the Donor</p>
        <a aria-label="Chat on WhatsApp" [attr.href]=" 'https://wa.me/' + this.phoneNumberUtil.toInternationalCode(this.currentDonorPhoneNum)" target="_blank">
          <img alt="Chat on WhatsApp" src="../../../assets/images/WhatsAppButtonGreenLarge.svg"/>
        </a>
      </div>

    </div>
  </div>
</div>
